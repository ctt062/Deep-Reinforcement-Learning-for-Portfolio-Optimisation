data:
  data_dir: data
  # Optimized 18-asset portfolio across multiple sectors (NO CRYPTO)
  assets:
  # Technology (5) - 28%
  - AAPL
  - MSFT
  - GOOGL
  - NVDA
  - AMZN
  # Healthcare (3) - 17%
  - JNJ
  - UNH
  - PFE
  # Financials (2) - 11%
  - JPM
  - V
  # Consumer (2) - 11%
  - WMT
  - COST
  # Broad Market ETFs (3) - 17%
  - SPY
  - QQQ
  - IWM
  # Fixed Income (2) - 11%
  - TLT
  - AGG
  # Commodities (1) - 5%
  - GLD
  start_date: '2010-01-01'
  end_date: '2024-12-31'
  train_ratio: 0.7
  frequency: 1d  # DAILY frequency for better opportunity capture

features:
  lookback_window: 60  # 60 days (~3 months)
  use_prices: true
  use_returns: true
  use_log_returns: true
  sma_periods:
  - 10
  - 20
  - 50
  - 200
  ema_periods:
  - 10
  - 20
  - 50
  ema_alpha: 0.1
  momentum_periods:
  - 5
  - 10
  - 20
  - 60
  normalize_prices: true
  normalize_method: zscore
  rolling_normalize: true
  rolling_window: 252  # 1 year of trading days

environment:
  initial_balance: 100000.0
  transaction_cost: 0.001
  allow_short: false
  max_leverage: 1.0
  slippage: 0.0
  reward_type: risk_adjusted
  risk_penalty_lambda: 1.0  # Balanced risk/return
  volatility_window: 60
  risk_free_rate: 0.02
  turnover_penalty: 0.001
  # Position sizing constraints
  min_position_size: 0.0  # Allow zero weight (can exclude assets)
  max_position_size: 0.20  # Max 20% per asset
  # STOP LOSS MECHANISM - NEW!
  enable_stop_loss: true
  stop_loss_threshold: 0.05  # 5% drawdown triggers stop loss
  stop_loss_action: defensive  # Switch to defensive allocation (bonds, gold, cash)
  stop_loss_recovery_threshold: 0.02  # Resume normal when DD < 2%

# Options overlay configuration (moderate protection)
options:
  enabled: true
  protective_puts:
    enabled: true
    max_hedge_ratio: 0.3  # Hedge up to 30% of portfolio
    strike_pct: 0.97  # 3% OTM puts (tighter protection)
    expiry_days: 30
    cost_factor: 0.015
  covered_calls:
    enabled: true
    max_coverage_ratio: 0.2  # Cover 20% of holdings
    strike_pct: 1.05  # 5% OTM calls
    expiry_days: 30
    premium_factor: 0.015

agents:
  ppo:
    policy: MlpPolicy
    learning_rate: 5.0e-05
    n_steps: 2048  # Reduced for daily data
    batch_size: 128
    n_epochs: 10
    gamma: 0.99
    gae_lambda: 0.95
    clip_range: 0.2
    ent_coef: 0.05
    vf_coef: 0.5
    max_grad_norm: 0.5
    network_arch:
    - 512
    - 512
    - 256
    - 128
  ddpg:
    policy: MlpPolicy
    learning_rate: 5.0e-05
    batch_size: 256
    buffer_size: 500000
    learning_starts: 10000  # Reduced warm-up for daily data
    gamma: 0.99
    tau: 0.005  # Faster target network updates
    action_noise: 0.1
    train_freq: 1
    gradient_steps: 1
    network_arch:
      pi:
      - 512
      - 512
      - 256
      - 128
      qf:
      - 512
      - 512
      - 256
      - 128
  dqn:
    policy: MlpPolicy
    learning_rate: 5.0e-05
    batch_size: 128
    buffer_size: 300000
    learning_starts: 5000
    gamma: 0.99
    target_update_interval: 2500
    train_freq: 4
    gradient_steps: 1
    exploration_fraction: 0.3
    exploration_initial_eps: 1.0
    exploration_final_eps: 0.01
    network_arch:
    - 512
    - 512
    - 256
    - 128

training:
  total_timesteps: 500000  # Reduced from 750k for faster training with daily data
  eval_freq: 50000
  n_eval_episodes: 5
  save_freq: 50000
  log_interval: 10
  verbose: 1
  tensorboard_log: logs
  device: cpu

evaluation:
  n_eval_episodes: 1
  deterministic: true
  render: false

benchmarks:
  equal_weight: true
  mean_variance: true
  momentum: true
  mv_lookback: 252
  mv_target_return: null
  mv_allow_short: false

metrics:
  annualized_factor: 252  # Daily data = 252 trading days
  risk_free_rate: 0.02
  confidence_level: 0.95

visualization:
  figsize:
  - 12
  - 6
  dpi: 100
  style: seaborn-v0_8-darkgrid
  save_format: png

paths:
  data_dir: data
  models_dir: models_daily_stoploss
  results_dir: results_daily_stoploss
  logs_dir: logs

seed: 42
